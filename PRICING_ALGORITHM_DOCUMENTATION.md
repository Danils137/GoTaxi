# üßÆ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è GoTaxi

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
1. [–û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã](#–æ–±–∑–æ—Ä-—Å–∏—Å—Ç–µ–º—ã)
2. [–ê–ª–≥–æ—Ä–∏—Ç–º –ø–æ–¥–±–æ—Ä–∞ –≤–æ–¥–∏—Ç–µ–ª–µ–π](#–∞–ª–≥–æ—Ä–∏—Ç–º-–ø–æ–¥–±–æ—Ä–∞-–≤–æ–¥–∏—Ç–µ–ª–µ–π)
3. [–°–∏—Å—Ç–µ–º–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è](#—Å–∏—Å—Ç–µ–º–∞-–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ-—Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è)
4. [–§–æ—Ä–º—É–ª—ã —Ä–∞—Å—á–µ—Ç–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏](#—Ñ–æ—Ä–º—É–ª—ã-—Ä–∞—Å—á–µ—Ç–∞-—Å—Ç–æ–∏–º–æ—Å—Ç–∏)
5. [–¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏](#—Ç–µ—Å—Ç–æ–≤—ã–µ-—Å—Ü–µ–Ω–∞—Ä–∏–∏)
6. [API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](#api-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)

---

## üéØ –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

### –ü—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–±–æ—Ç—ã
- **–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —Ç–∞—Ä–∏—Ñ—ã**: –∫–∞–∂–¥—ã–π –≤–æ–¥–∏—Ç–µ–ª—å —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–≤–æ–∏ —Ü–µ–Ω—ã
- **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Å–ø—Ä–æ—Å—É
- **–°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–∞—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—è**: –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º –ø–æ–¥–±–æ—Ä–∞
- **–ú–∞–∫—Å–∏–º–∏–∑–∞—Ü–∏—è –¥–æ—Ö–æ–¥–æ–≤**: —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª–µ–π

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
```
–ö–ª–∏–µ–Ω—Ç ‚Üí API –ø–æ–¥–±–æ—Ä–∞ ‚Üí –ê–ª–≥–æ—Ä–∏—Ç–º —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ ‚Üí –†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ ‚Üí –†–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Üí –†–µ–∑—É–ª—å—Ç–∞—Ç
```

---

## üîç –ê–ª–≥–æ—Ä–∏—Ç–º –ø–æ–¥–±–æ—Ä–∞ –≤–æ–¥–∏—Ç–µ–ª–µ–π

### 1. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤–æ–¥–∏—Ç–µ–ª–µ–π

#### –ö—Ä–∏—Ç–µ—Ä–∏–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:
```javascript
const availabilityFilter = {
  isOnline: true,
  isAvailable: true,
  distance: <= 10km,
  carCapacity: >= passengerCount,
  hasValidLicense: true,
  isApproved: true
}
```

#### –ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è:
- **–†–∞–¥–∏—É—Å –ø–æ–∏—Å–∫–∞**: 10 –∫–º –æ—Ç —Ç–æ—á–∫–∏ –ø–æ–¥–∞—á–∏
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –±–ª–∏–∂–∞–π—à–∏–µ –≤–æ–¥–∏—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—é—Ç –±–æ–Ω—É—Å –∫ —Ä–µ–π—Ç–∏–Ω–≥—É
- **–ó–æ–Ω—ã**: —É—á–µ—Ç –æ—Å–æ–±—ã—Ö –∑–æ–Ω (–∞—ç—Ä–æ–ø–æ—Ä—Ç, —Ü–µ–Ω—Ç—Ä –≥–æ—Ä–æ–¥–∞)

### 2. –†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤–æ–¥–∏—Ç–µ–ª—è

#### –ë–∞–∑–æ–≤–∞—è —Ñ–æ—Ä–º—É–ª–∞:
```
–ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å = (–ë–∞–∑–æ–≤—ã–π —Ç–∞—Ä–∏—Ñ + –°—Ç–æ–∏–º–æ—Å—Ç—å —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è + –°—Ç–æ–∏–º–æ—Å—Ç—å –≤—Ä–µ–º–µ–Ω–∏ + –ù–∞–¥–±–∞–≤–∫–∏) √ó –ú–Ω–æ–∂–∏—Ç–µ–ª—å —Å–ø—Ä–æ—Å–∞
```

#### –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è:
```javascript
const calculatePrice = (driver, route, time) => {
  const baseFare = driver.tariff.baseFare;
  const distanceCost = route.distance * driver.tariff.pricePerKm;
  const timeCost = route.duration * driver.tariff.pricePerMinute;
  
  const surcharges = calculateSurcharges(driver.tariff, time, route);
  const demandMultiplier = getDynamicMultiplier(time, route.pickup);
  
  return (baseFare + distanceCost + timeCost + surcharges.total) * demandMultiplier;
}
```

### 3. –°–∏—Å—Ç–µ–º–∞ —Å–∫–æ—Ä–∏–Ω–≥–∞ –≤–æ–¥–∏—Ç–µ–ª–µ–π

#### –§–æ—Ä–º—É–ª–∞ —Å–∫–æ—Ä–∏–Ω–≥–∞:
```javascript
const calculateDriverScore = (driver, pricing, logistics) => {
  const priceScore = (1 / pricing.totalCost) * 100;      // –ß–µ–º –¥–µ—à–µ–≤–ª–µ, —Ç–µ–º –ª—É—á—à–µ
  const speedScore = (1 / logistics.estimatedArrival) * 50; // –ß–µ–º –±—ã—Å—Ç—Ä–µ–µ, —Ç–µ–º –ª—É—á—à–µ
  const ratingScore = driver.rating * 20;                  // –†–µ–π—Ç–∏–Ω–≥ –≤–æ–¥–∏—Ç–µ–ª—è
  const experienceScore = Math.min(driver.tripsCount / 100, 1) * 30; // –û–ø—ã—Ç
  
  return priceScore + speedScore + ratingScore + experienceScore;
}
```

#### –í–µ—Å–æ–≤—ã–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã:
- **–¶–µ–Ω–∞**: 40% (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏)
- **–°–∫–æ—Ä–æ—Å—Ç—å –ø—Ä–∏–±—ã—Ç–∏—è**: 20% (–≤–∞–∂–Ω–æ—Å—Ç—å –≤—Ä–µ–º–µ–Ω–∏)
- **–†–µ–π—Ç–∏–Ω–≥**: 25% (–∫–∞—á–µ—Å—Ç–≤–æ —Å–µ—Ä–≤–∏—Å–∞)
- **–û–ø—ã—Ç**: 15% (–Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å)

### 4. –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π

#### –ê–ª–≥–æ—Ä–∏—Ç–º –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏:
```javascript
const categorizeDrivers = (drivers) => {
  const sorted = drivers.sort((a, b) => a.pricing.totalCost - b.pricing.totalCost);
  const priceRange = sorted[sorted.length - 1].pricing.totalCost - sorted[0].pricing.totalCost;
  
  return {
    economy: sorted.filter(d => d.pricing.totalCost <= sorted[0].pricing.totalCost + priceRange * 0.3),
    standard: sorted.filter(d => d.pricing.totalCost > sorted[0].pricing.totalCost + priceRange * 0.3 && 
                                d.pricing.totalCost <= sorted[0].pricing.totalCost + priceRange * 0.7),
    premium: sorted.filter(d => d.pricing.totalCost > sorted[0].pricing.totalCost + priceRange * 0.7)
  };
}
```

---

## üìà –°–∏—Å—Ç–µ–º–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è

### 1. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–Ω–æ–∂–∏—Ç–µ–ª—è —Å–ø—Ä–æ—Å–∞

#### –ë–∞–∑–æ–≤—ã–µ —Ñ–∞–∫—Ç–æ—Ä—ã:
```javascript
const dynamicFactors = {
  demandSupply: calculateDemandSupplyRatio(location, time),    // 0.8 - 2.0
  timeOfDay: getTimeMultiplier(time),                         // 0.9 - 1.5
  dayOfWeek: getDayMultiplier(time),                          // 0.95 - 1.3
  weather: getWeatherMultiplier(location, time),              // 1.0 - 1.4
  events: getEventMultiplier(location, time),                 // 1.0 - 2.0
  seasonal: getSeasonalMultiplier(time)                       // 0.9 - 1.2
}
```

#### –§–æ—Ä–º—É–ª–∞ –∏—Ç–æ–≥–æ–≤–æ–≥–æ –º–Ω–æ–∂–∏—Ç–µ–ª—è:
```javascript
const finalMultiplier = Math.min(
  Math.max(
    demandSupply * timeOfDay * dayOfWeek * weather * events * seasonal,
    0.8  // –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –º–Ω–æ–∂–∏—Ç–µ–ª—å
  ),
  2.5    // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –º–Ω–æ–∂–∏—Ç–µ–ª—å
);
```

### 2. –†–∞—Å—á–µ—Ç —Å–ø—Ä–æ—Å–∞ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è

#### –ê–ª–≥–æ—Ä–∏—Ç–º:
```javascript
const calculateDemandSupplyRatio = (location, time) => {
  const activeRides = getActiveRidesInRadius(location, 5); // 5 –∫–º —Ä–∞–¥–∏—É—Å
  const availableDrivers = getAvailableDriversInRadius(location, 10); // 10 –∫–º —Ä–∞–¥–∏—É—Å
  const pendingRequests = getPendingRequestsInRadius(location, 5);
  
  const demand = activeRides + pendingRequests * 1.5; // –û–∂–∏–¥–∞—é—â–∏–µ –∑–∞–∫–∞–∑—ã –≤–µ—Å—è—Ç –±–æ–ª—å—à–µ
  const supply = availableDrivers;
  
  if (supply === 0) return 2.0; // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –º–Ω–æ–∂–∏—Ç–µ–ª—å –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –≤–æ–¥–∏—Ç–µ–ª–µ–π
  
  const ratio = demand / supply;
  
  // –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ –º–Ω–æ–∂–∏—Ç–µ–ª—å
  if (ratio <= 0.5) return 0.9;      // –ù–∏–∑–∫–∏–π —Å–ø—Ä–æ—Å
  if (ratio <= 1.0) return 1.0;      // –ù–æ—Ä–º–∞–ª—å–Ω—ã–π —Å–ø—Ä–æ—Å
  if (ratio <= 1.5) return 1.2;      // –£–º–µ—Ä–µ–Ω–Ω—ã–π —Å–ø—Ä–æ—Å
  if (ratio <= 2.0) return 1.5;      // –í—ã—Å–æ–∫–∏–π —Å–ø—Ä–æ—Å
  return 1.8;                         // –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–π —Å–ø—Ä–æ—Å
}
```

### 3. –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–Ω–æ–∂–∏—Ç–µ–ª–∏

#### –ü–æ –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫:
```javascript
const timeMultipliers = {
  '00:00-06:00': 1.3,  // –ù–æ—á—å
  '06:00-08:00': 1.2,  // –†–∞–Ω–Ω–µ–µ —É—Ç—Ä–æ
  '08:00-10:00': 1.4,  // –£—Ç—Ä–µ–Ω–Ω–∏–π —á–∞—Å –ø–∏–∫
  '10:00-16:00': 1.0,  // –î–µ–Ω—å
  '16:00-19:00': 1.5,  // –í–µ—á–µ—Ä–Ω–∏–π —á–∞—Å –ø–∏–∫
  '19:00-22:00': 1.1,  // –í–µ—á–µ—Ä
  '22:00-24:00': 1.2   // –ü–æ–∑–¥–Ω–∏–π –≤–µ—á–µ—Ä
}
```

#### –ü–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏:
```javascript
const dayMultipliers = {
  monday: 1.0,
  tuesday: 1.0,
  wednesday: 1.0,
  thursday: 1.1,
  friday: 1.2,
  saturday: 1.3,
  sunday: 1.1
}
```

### 4. –ü–æ–≥–æ–¥–Ω—ã–µ —É—Å–ª–æ–≤–∏—è

#### –ú–Ω–æ–∂–∏—Ç–µ–ª–∏ –ø–æ –ø–æ–≥–æ–¥–µ:
```javascript
const weatherMultipliers = {
  clear: 1.0,
  cloudy: 1.0,
  rain: 1.25,
  heavy_rain: 1.4,
  snow: 1.35,
  storm: 1.5,
  fog: 1.15
}
```

---

## üí∞ –§–æ—Ä–º—É–ª—ã —Ä–∞—Å—á–µ—Ç–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏

### 1. –ë–∞–∑–æ–≤—ã–π —Ä–∞—Å—á–µ—Ç

#### –û—Å–Ω–æ–≤–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞:
```
–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å = –ë–∞–∑–æ–≤—ã–π —Ç–∞—Ä–∏—Ñ + (–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ √ó –¶–µ–Ω–∞ –∑–∞ –∫–º) + (–í—Ä–µ–º—è √ó –¶–µ–Ω–∞ –∑–∞ –º–∏–Ω—É—Ç—É) + –ù–∞–¥–±–∞–≤–∫–∏
```

#### –° —É—á–µ—Ç–æ–º –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è:
```
–ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å = –û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å √ó –ú–Ω–æ–∂–∏—Ç–µ–ª—å —Å–ø—Ä–æ—Å–∞
```

### 2. –ù–∞–¥–±–∞–≤–∫–∏

#### –¢–∏–ø—ã –Ω–∞–¥–±–∞–≤–æ–∫:
```javascript
const surcharges = {
  night: {
    condition: hour >= 22 || hour < 6,
    type: 'per_km',
    amount: driver.tariff.nightSurcharge || 0.5
  },
  weekend: {
    condition: day === 'saturday' || day === 'sunday',
    type: 'percentage',
    amount: driver.tariff.weekendSurcharge || 0.2
  },
  airport: {
    condition: isAirportRoute(pickup, dropoff),
    type: 'fixed',
    amount: driver.tariff.airportSurcharge || 2.0
  }
}
```

### 3. –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å

#### –ü—Ä–∞–≤–∏–ª–æ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏:
```javascript
const minimumFare = Math.max(
  driver.tariff.minimumFare || 3.0,
  driver.tariff.baseFare + 1.0
);

const finalPrice = Math.max(calculatedPrice, minimumFare);
```

---

## üß™ –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –û–±—ã—á–Ω–∞—è –ø–æ–µ–∑–¥–∫–∞ –≤ –±—É–¥–Ω–∏–π –¥–µ–Ω—å

**–£—Å–ª–æ–≤–∏—è:**
- –í—Ä–µ–º—è: –í—Ç–æ—Ä–Ω–∏–∫, 14:00
- –ú–∞—Ä—à—Ä—É—Ç: –¶–µ–Ω—Ç—Ä –†–∏–≥–∏ ‚Üí –¢–æ—Ä–≥–æ–≤—ã–π —Ü–µ–Ω—Ç—Ä (8 –∫–º, 15 –º–∏–Ω)
- –ü–æ–≥–æ–¥–∞: –Ø—Å–Ω–æ
- –°–ø—Ä–æ—Å: –ù–æ—Ä–º–∞–ª—å–Ω—ã–π

**–í–æ–¥–∏—Ç–µ–ª—å –ê (–≠–∫–æ–Ω–æ–º):**
```javascript
const tariff = {
  baseFare: 2.50,
  pricePerKm: 1.20,
  pricePerMinute: 0.30
}

const calculation = {
  baseFare: 2.50,
  distanceCost: 8 * 1.20 = 9.60,
  timeCost: 15 * 0.30 = 4.50,
  surcharges: 0.00,
  subtotal: 16.60,
  demandMultiplier: 1.0,
  total: 16.60
}
```

**–í–æ–¥–∏—Ç–µ–ª—å –ë (–ü—Ä–µ–º–∏—É–º):**
```javascript
const tariff = {
  baseFare: 3.50,
  pricePerKm: 1.60,
  pricePerMinute: 0.40
}

const calculation = {
  baseFare: 3.50,
  distanceCost: 8 * 1.60 = 12.80,
  timeCost: 15 * 0.40 = 6.00,
  surcharges: 0.00,
  subtotal: 22.30,
  demandMultiplier: 1.0,
  total: 22.30
}
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü–æ–µ–∑–¥–∫–∞ –≤ —á–∞—Å –ø–∏–∫ —Å –¥–æ–∂–¥–µ–º

**–£—Å–ª–æ–≤–∏—è:**
- –í—Ä–µ–º—è: –ü—è—Ç–Ω–∏—Ü–∞, 18:00
- –ú–∞—Ä—à—Ä—É—Ç: –û—Ñ–∏—Å–Ω—ã–π —Ä–∞–π–æ–Ω ‚Üí –ñ–∏–ª–æ–π —Ä–∞–π–æ–Ω (12 –∫–º, 25 –º–∏–Ω)
- –ü–æ–≥–æ–¥–∞: –î–æ–∂–¥—å
- –°–ø—Ä–æ—Å: –í—ã—Å–æ–∫–∏–π

**–ú–Ω–æ–∂–∏—Ç–µ–ª–∏:**
```javascript
const multipliers = {
  timeOfDay: 1.5,      // –ß–∞—Å –ø–∏–∫
  dayOfWeek: 1.2,      // –ü—è—Ç–Ω–∏—Ü–∞
  weather: 1.25,       // –î–æ–∂–¥—å
  demandSupply: 1.3,   // –í—ã—Å–æ–∫–∏–π —Å–ø—Ä–æ—Å
  final: 1.5 * 1.2 * 1.25 * 1.3 = 2.925 ‚Üí 2.5 (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ)
}
```

**–†–∞—Å—á–µ—Ç –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª—è:**
```javascript
const calculation = {
  baseFare: 2.50,
  distanceCost: 12 * 1.20 = 14.40,
  timeCost: 25 * 0.30 = 7.50,
  surcharges: 0.00,
  subtotal: 24.40,
  demandMultiplier: 2.5,
  total: 61.00
}
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ù–æ—á–Ω–∞—è –ø–æ–µ–∑–¥–∫–∞ –≤ –∞—ç—Ä–æ–ø–æ—Ä—Ç

**–£—Å–ª–æ–≤–∏—è:**
- –í—Ä–µ–º—è: –°—É–±–±–æ—Ç–∞, 02:00
- –ú–∞—Ä—à—Ä—É—Ç: –¶–µ–Ω—Ç—Ä ‚Üí –ê—ç—Ä–æ–ø–æ—Ä—Ç (15 –∫–º, 20 –º–∏–Ω)
- –ü–æ–≥–æ–¥–∞: –Ø—Å–Ω–æ
- –°–ø—Ä–æ—Å: –ù–∏–∑–∫–∏–π

**–ù–∞–¥–±–∞–≤–∫–∏:**
```javascript
const surcharges = {
  night: 15 * 0.50 = 7.50,    // –ù–æ—á–Ω–∞—è –Ω–∞–¥–±–∞–≤–∫–∞ –∑–∞ –∫–º
  airport: 2.00,              // –ù–∞–¥–±–∞–≤–∫–∞ –∑–∞ –∞—ç—Ä–æ–ø–æ—Ä—Ç
  total: 9.50
}
```

**–†–∞—Å—á–µ—Ç:**
```javascript
const calculation = {
  baseFare: 2.50,
  distanceCost: 15 * 1.20 = 18.00,
  timeCost: 20 * 0.30 = 6.00,
  surcharges: 9.50,
  subtotal: 36.00,
  demandMultiplier: 1.3 * 1.3 * 0.9 = 1.52, // –ù–æ—á—å √ó –°—É–±–±–æ—Ç–∞ √ó –ù–∏–∑–∫–∏–π —Å–ø—Ä–æ—Å
  total: 54.72
}
```

---

## üì° API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### 1. –ü–æ–∏—Å–∫ –≤–æ–¥–∏—Ç–µ–ª–µ–π

**Endpoint:** `POST /api/ride-matching/find-drivers`

**Request:**
```json
{
  "pickup": {
    "latitude": 56.9496,
    "longitude": 24.1052,
    "address": "–¶–µ–Ω—Ç—Ä –†–∏–≥–∏"
  },
  "dropoff": {
    "latitude": 56.9240,
    "longitude": 24.0859,
    "address": "–ê—ç—Ä–æ–ø–æ—Ä—Ç –†–∏–≥–∞"
  },
  "requestTime": "2024-01-15T18:30:00Z",
  "passengerCount": 2,
  "preferences": {
    "maxOptions": 5,
    "region": "Riga"
  }
}
```

**Response:**
```json
{
  "success": true,
  "data": {
    "options": [
      {
        "driverId": "driver_123",
        "driver": {
          "name": "–ê–Ω–¥—Ä–µ–π –ü–µ—Ç—Ä–æ–≤",
          "rating": 4.8,
          "tripsCount": 1250,
          "carModel": "Toyota Camry",
          "carColor": "–ß–µ—Ä–Ω—ã–π",
          "licensePlate": "AB-1234"
        },
        "pricing": {
          "baseFare": 2.50,
          "distanceCost": 18.00,
          "timeCost": 6.00,
          "surcharges": {
            "night": 0.00,
            "weekend": 0.00,
            "airport": 2.00,
            "total": 2.00
          },
          "demandMultiplier": 1.5,
          "totalCost": 42.75,
          "currency": "EUR"
        },
        "logistics": {
          "estimatedArrival": 5,
          "estimatedTripTime": 20,
          "distance": 15.2
        },
        "score": 85.6,
        "category": "standard",
        "label": "–ë—ã—Å—Ç—Ä—ã–π",
        "description": "–û–ø—ã—Ç–Ω—ã–π –≤–æ–¥–∏—Ç–µ–ª—å —Å –≤—ã—Å–æ–∫–∏–º —Ä–µ–π—Ç–∏–Ω–≥–æ–º"
      }
    ],
    "pricingInfo": {
      "finalMultiplier": 1.5,
      "level": "moderate",
      "explanation": "–£–º–µ—Ä–µ–Ω–Ω—ã–π —Å–ø—Ä–æ—Å, –≤–µ—á–µ—Ä–Ω–∏–π —á–∞—Å –ø–∏–∫"
    },
    "requestId": "req_1642267800_abc123",
    "validUntil": "2024-01-15T18:35:00Z"
  }
}
```

### 2. –†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏

**Endpoint:** `POST /api/ride-matching/calculate-price`

**Request:**
```json
{
  "driverId": "driver_123",
  "pickup": {
    "latitude": 56.9496,
    "longitude": 24.1052
  },
  "dropoff": {
    "latitude": 56.9240,
    "longitude": 24.0859
  },
  "requestTime": "2024-01-15T18:30:00Z"
}
```

### 3. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–∏

**Endpoint:** `GET /api/ride-matching/pricing-info`

**Query Parameters:**
- `latitude` - —à–∏—Ä–æ—Ç–∞
- `longitude` - –¥–æ–ª–≥–æ—Ç–∞  
- `region` - —Ä–µ–≥–∏–æ–Ω (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é "Riga")

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```env
# –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∞–ª–≥–æ—Ä–∏—Ç–º–∞
MAX_SEARCH_RADIUS=10          # –∫–º
MAX_DEMAND_MULTIPLIER=2.5     # –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –º–Ω–æ–∂–∏—Ç–µ–ª—å
MIN_DEMAND_MULTIPLIER=0.8     # –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –º–Ω–æ–∂–∏—Ç–µ–ª—å
MAX_DRIVER_OPTIONS=8          # –º–∞–∫—Å–∏–º—É–º –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞

# –í–µ—Å–∞ —Å–∫–æ—Ä–∏–Ω–≥–∞
PRICE_WEIGHT=0.4
SPEED_WEIGHT=0.2
RATING_WEIGHT=0.25
EXPERIENCE_WEIGHT=0.15

# –¢–∞–π–º-–∞—É—Ç—ã
PRICE_VALIDITY_MINUTES=5      # –≤—Ä–µ–º—è –¥–µ–π—Å—Ç–≤–∏—è —Ü–µ–Ω—ã
DRIVER_RESPONSE_TIMEOUT=30    # –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –≤–æ–¥–∏—Ç–µ–ª—è
```

### –†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

```javascript
const regionSettings = {
  Riga: {
    currency: 'EUR',
    minimumFare: 3.00,
    maxSearchRadius: 15,
    airportSurcharge: 2.00
  },
  Daugavpils: {
    currency: 'EUR', 
    minimumFare: 2.50,
    maxSearchRadius: 10,
    airportSurcharge: 1.50
  }
}
```

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

### –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

1. **–ö–æ–Ω–≤–µ—Ä—Å–∏—è –∑–∞–∫–∞–∑–æ–≤**: % –∑–∞–∫–∞–∑–æ–≤, –∑–∞–≤–µ—Ä—à–∏–≤—à–∏—Ö—Å—è –ø–æ–µ–∑–¥–∫–æ–π
2. **–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞**: —Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –ø—Ä–∏–Ω—è—Ç–∏—è –∑–∞–∫–∞–∑–∞ –≤–æ–¥–∏—Ç–µ–ª–µ–º
3. **–¢–æ—á–Ω–æ—Å—Ç—å —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è**: –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –∏—Ç–æ–≥–æ–≤–æ–π —Ü–µ–Ω—ã –æ—Ç —Ä–∞—Å—á–µ—Ç–Ω–æ–π
4. **–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç—å**: —Ä–µ–π—Ç–∏–Ω–≥–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ –≤–æ–¥–∏—Ç–µ–ª–µ–π

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

```javascript
const logPricingDecision = {
  requestId: 'req_123',
  timestamp: '2024-01-15T18:30:00Z',
  location: { lat: 56.9496, lng: 24.1052 },
  driversFound: 5,
  selectedDriver: 'driver_123',
  finalPrice: 42.75,
  demandMultiplier: 1.5,
  factors: {
    timeOfDay: 1.5,
    weather: 1.0,
    demandSupply: 1.2
  }
}
```

---

## üöÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **–¢–∞—Ä–∏—Ñ—ã –≤–æ–¥–∏—Ç–µ–ª–µ–π**: –∫—ç—à –Ω–∞ 5 –º–∏–Ω—É—Ç
2. **–ü–æ–≥–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**: –∫—ç—à –Ω–∞ 15 –º–∏–Ω—É—Ç  
3. **–ú–∞—Ä—à—Ä—É—Ç—ã**: –∫—ç—à –Ω–∞ 1 —á–∞—Å
4. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–ø—Ä–æ—Å–∞**: –∫—ç—à –Ω–∞ 2 –º–∏–Ω—É—Ç—ã

### –ò–Ω–¥–µ–∫—Å—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```javascript
// MongoDB –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
db.drivers.createIndex({ 
  location: "2dsphere", 
  isOnline: 1, 
  isAvailable: 1 
});

db.rides.createIndex({ 
  createdAt: 1, 
  status: 1, 
  "pickup.coordinates": "2dsphere" 
});
```

---

## üîÆ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### –ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ

1. **–ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ —Å–ø—Ä–æ—Å–∞**: ML –º–æ–¥–µ–ª—å –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∞ –ø–∏–∫–æ–≤
2. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤**: AI –¥–ª—è –ª—É—á—à–∏—Ö –ø—É—Ç–µ–π
3. **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è**: –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Ç–∞—Ä–∏—Ñ–æ–≤

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–∫—Ç–æ—Ä—ã

1. **–ü—Ä–æ–±–∫–∏**: –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥–∞–Ω–Ω—ã–º–∏ –æ —Ç—Ä–∞—Ñ–∏–∫–µ
2. **–°–æ–±—ã—Ç–∏—è**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π
3. **–°–µ–∑–æ–Ω–Ω–æ—Å—Ç—å**: —É—á–µ—Ç –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤ –∏ –∫–∞–Ω–∏–∫—É–ª

---

*–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞: 19 —è–Ω–≤–∞—Ä—è 2025*
*–í–µ—Ä—Å–∏—è –∞–ª–≥–æ—Ä–∏—Ç–º–∞: 1.0*

