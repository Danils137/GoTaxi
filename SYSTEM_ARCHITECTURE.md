# ๐ ะััะธัะตะบัััะฐ ัะธััะตะผั GoTaxi

## ๐ ะกัะตะผะฐ ะฟะพะดะบะปััะตะฝะธะน

```
                    โโโโโโโโโโโโโโโโโโโ
                    โ   MONGODB       โ
                    โ   ะะฐะทะฐ ะดะฐะฝะฝัั   โ
                    โโโโโโโโโโโฌโโโโโโโโ
                              โ
                    โโโโโโโโโโโผโโโโโโโโ
                    โ     SERVER      โ
                    โ  Node.js/Expressโ
                    โ   Socket.IO     โ
                    โ   Port: 5000    โ
                    โโโโโโโโโโโฌโโโโโโโโ
                              โ
            โโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโ
            โ                 โ                 โ
    โโโโโโโโโผโโโโโโโ โโโโโโโโโผโโโโโโโ โโโโโโโโโผโโโโโโโ
    โ   CLIENT     โ โ    DRIVER    โ โ    ADMIN     โ
    โ React/Vite   โ โReact Native  โ โ   React      โ
    โPort: 3001    โ โ   Expo       โ โ Port: 3000   โ
    โ              โ โ              โ โ              โ
    โโข ะงะฐั ะบะปะธะตะฝัะพะฒโ โโข ะัะธะตะผ ะทะฐะบะฐะทะพะฒโ โโข ะฃะฟัะฐะฒะปะตะฝะธะต  โ
    โโข ะะฐะบะฐะท ัะฐะบัะธ โ โโข GPS ััะตะบะธะฝะณ โ โโข ะกัะฐัะธััะธะบะฐ  โ
    โโข ะะฐััั       โ โโข ะะฐะฒะธะณะฐัะธั   โ โโข ะะพะฝะธัะพัะธะฝะณ  โ
    โโโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโโ
```

## โ ะะพะดะบะปััะตะฝะธั ะบ ัะตัะฒะตัั

### ๐ฏ **CLIENT ะฟัะธะปะพะถะตะฝะธะต** โ SERVER
- **ะกัะฐััั**: โ **ะะะะะะฎะงะะะ**
- **ะัะพัะพะบะพะป**: HTTP REST API + WebSocket
- **ะะพัั**: 3001 โ 5000
- **ะคัะฝะบัะธะธ**:
  - ะััะตะฝัะธัะธะบะฐัะธั ะฟะพะปัะทะพะฒะฐัะตะปะตะน
  - ะงะฐั ะผะตะถะดั ะบะปะธะตะฝัะฐะผะธ
  - ะะฐะบะฐะท ะธ ะพััะปะตะถะธะฒะฐะฝะธะต ะฟะพะตะทะดะพะบ
  - ะะพะปััะตะฝะธะต ะดะฐะฝะฝัั ะบะฐัั ัะตัะตะท ัะตัะฒะตั

### ๐ **DRIVER ะฟัะธะปะพะถะตะฝะธะต** โ SERVER  
- **ะกัะฐััั**: โ **ะะะะะะฎะงะะะ** (ัะตัะตะท ัััะตััะฒัััะธะต API)
- **ะัะพัะพะบะพะป**: HTTP REST API + WebSocket
- **ะคัะฝะบัะธะธ**:
  - ะะตะณะธัััะฐัะธั ะธ ะฐััะตะฝัะธัะธะบะฐัะธั ะฒะพะดะธัะตะปะตะน
  - ะะพะปััะตะฝะธะต ะทะฐะบะฐะทะพะฒ ะพั ะบะปะธะตะฝัะพะฒ
  - ะะฑะฝะพะฒะปะตะฝะธะต ััะฐัััะฐ ะฟะพะตะทะดะบะธ
  - ะัะฟัะฐะฒะบะฐ GPS ะบะพะพัะดะธะฝะฐั ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ

### ๐จโ๐ผ **ADMIN ะฟะฐะฝะตะปั** โ SERVER
- **ะกัะฐััั**: โ **ะะะะะะฎะงะะะ** (ัะตัะตะท ัััะตััะฒัััะธะต API)
- **ะัะพัะพะบะพะป**: HTTP REST API + WebSocket
- **ะะพัั**: 3000 โ 5000
- **ะคัะฝะบัะธะธ**:
  - ะฃะฟัะฐะฒะปะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปัะผะธ ะธ ะฒะพะดะธัะตะปัะผะธ
  - ะะพะฝะธัะพัะธะฝะณ ะฟะพะตะทะดะพะบ
  - ะกัะฐัะธััะธะบะฐ ะธ ะฐะฝะฐะปะธัะธะบะฐ
  - ะะฐัััะพะนะบะธ ัะธััะตะผั

## ๐ ะะพัะพะบะธ ะดะฐะฝะฝัั

### 1. **ะะฐะบะฐะท ะฟะพะตะทะดะบะธ**:
```
CLIENT โ SERVER โ DRIVER โ SERVER โ CLIENT
  โ        โ        โ        โ        โ
ะะฐะบะฐะท โ ะกะพััะฐะฝะตะฝะธะต โ ะฃะฒะตะดะพะผะปะตะฝะธะต โ ะัะธะฝััะธะต โ ะะพะดัะฒะตัะถะดะตะฝะธะต
```

### 2. **ะงะฐั ะผะตะถะดั ะบะปะธะตะฝัะฐะผะธ**:
```
CLIENT A โ SERVER โ CLIENT B
    โ        โ         โ
ะกะพะพะฑัะตะฝะธะต โ WebSocket โ ะะพะปััะตะฝะธะต
```

### 3. **ะััะปะตะถะธะฒะฐะฝะธะต ะฟะพะตะทะดะบะธ**:
```
DRIVER โ SERVER โ CLIENT
   โ        โ        โ
GPS โ WebSocket โ ะะฐััะฐ
```

### 4. **ะะดะผะธะฝะธัััะธัะพะฒะฐะฝะธะต**:
```
ADMIN โ SERVER โ DATABASE
  โ       โ         โ
ะะตะนััะฒะธะต โ API โ ะะทะผะตะฝะตะฝะธั
```

## ๐ API Endpoints (ะพะฑัะธะต ะดะปั ะฒัะตั)

### ะััะตะฝัะธัะธะบะฐัะธั:
- `POST /api/auth/login` - ะัะพะด (CLIENT, DRIVER, ADMIN)
- `POST /api/auth/register` - ะะตะณะธัััะฐัะธั
- `GET /api/auth/me` - ะขะตะบััะธะน ะฟะพะปัะทะพะฒะฐัะตะปั

### ะะพะตะทะดะบะธ:
- `GET /api/ride` - ะกะฟะธัะพะบ ะฟะพะตะทะดะพะบ
- `POST /api/ride/book` - ะะฐะบะฐะทะฐัั (CLIENT)
- `POST /api/ride/accept` - ะัะธะฝััั (DRIVER)
- `PUT /api/ride/:id/status` - ะะฑะฝะพะฒะธัั ััะฐััั

### ะงะฐั:
- `GET /api/chat` - ะกะฟะธัะพะบ ัะฐัะพะฒ (CLIENT)
- `POST /api/chat/:id/message` - ะัะฟัะฐะฒะธัั ัะพะพะฑัะตะฝะธะต

### ะะฐััั:
- `GET /api/maps/config` - ะะพะฝัะธะณััะฐัะธั ะบะฐัั
- `POST /api/maps/directions` - ะะฐัััััั

### ะะดะผะธะฝะธัััะธัะพะฒะฐะฝะธะต:
- `GET /api/admin/users` - ะะพะปัะทะพะฒะฐัะตะปะธ (ADMIN)
- `GET /api/admin/drivers` - ะะพะดะธัะตะปะธ (ADMIN)
- `GET /api/admin/stats` - ะกัะฐัะธััะธะบะฐ (ADMIN)

## ๐ WebSocket ะกะพะฑััะธั

### ะะปั CLIENT:
- `new_message` - ะะพะฒะพะต ัะพะพะฑัะตะฝะธะต ะฒ ัะฐัะต
- `ride_accepted` - ะะพะตะทะดะบะฐ ะฟัะธะฝััะฐ ะฒะพะดะธัะตะปะตะผ
- `driver_location` - ะะตััะพะฟะพะปะพะถะตะฝะธะต ะฒะพะดะธัะตะปั

### ะะปั DRIVER:
- `new_ride_request` - ะะพะฒัะน ะทะฐะบะฐะท ะฟะพะตะทะดะบะธ
- `ride_cancelled` - ะะพะตะทะดะบะฐ ะพัะผะตะฝะตะฝะฐ ะบะปะธะตะฝัะพะผ

### ะะปั ADMIN:
- `system_alert` - ะกะธััะตะผะฝัะต ัะฒะตะดะพะผะปะตะฝะธั
- `new_user_registered` - ะะพะฒัะน ะฟะพะปัะทะพะฒะฐัะตะปั
- `ride_completed` - ะะพะตะทะดะบะฐ ะทะฐะฒะตััะตะฝะฐ

## ๐ ะะตะทะพะฟะฐัะฝะพััั

### ะััะตะฝัะธัะธะบะฐัะธั:
- **JWT ัะพะบะตะฝั** ะดะปั ะฒัะตั ะฟัะธะปะพะถะตะฝะธะน
- **ะะพะปะธ ะฟะพะปัะทะพะฒะฐัะตะปะตะน**: customer, driver, admin
- **Middleware ะฟัะพะฒะตัะบะธ** ะฝะฐ ัะตัะฒะตัะต

### CORS ะฝะฐัััะพะนะบะธ:
```javascript
// ะ server/server.ts
app.use(cors({
  origin: [
    'http://localhost:3001', // CLIENT
    'http://localhost:3000', // ADMIN
    'exp://localhost:19000'  // DRIVER (Expo)
  ]
}));
```

## ๐ฑ ะัะพะฑะตะฝะฝะพััะธ ะบะฐะถะดะพะณะพ ะฟัะธะปะพะถะตะฝะธั

### CLIENT (ะะปะธะตะฝัั):
- **ะฃะฝะธะบะฐะปัะฝะฐั ััะฝะบัะธั**: ะงะฐั ะผะตะถะดั ะบะปะธะตะฝัะฐะผะธ
- **ะัะฝะพะฒะฝัะต ัะบัะฐะฝั**: ะงะฐัั, ะะฐะบะฐะท ัะฐะบัะธ, ะัะพัะธะปั
- **ะะปะฐัะตะถะธ**: ะะฐะฟััะผัั ะฒะพะดะธัะตะปั (ะฝะฐะปะธัะฝัะต/ะบะฐััะฐ)

### DRIVER (ะะพะดะธัะตะปะธ):
- **ะะพะฑะธะปัะฝะพะต ะฟัะธะปะพะถะตะฝะธะต** (React Native/Expo)
- **GPS ััะตะบะธะฝะณ** ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ
- **ะัะธะตะผ ะทะฐะบะฐะทะพะฒ** ะธ ะฝะฐะฒะธะณะฐัะธั
- **ะะพะปััะตะฝะธะต ะพะฟะปะฐัั** ะฝะฐะฟััะผัั ะพั ะบะปะธะตะฝัะพะฒ

### ADMIN (ะะดะผะธะฝะธัััะฐัะพัั):
- **ะะตะฑ-ะฟะฐะฝะตะปั** ะดะปั ัะฟัะฐะฒะปะตะฝะธั
- **ะะพะฝะธัะพัะธะฝะณ** ะฒัะตั ะฟะพะตะทะดะพะบ
- **ะฃะฟัะฐะฒะปะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปัะผะธ** ะธ ะฒะพะดะธัะตะปัะผะธ
- **ะกัะฐัะธััะธะบะฐ** ะธ ะฐะฝะฐะปะธัะธะบะฐ

## ๐ฏ ะะฐะบะปััะตะฝะธะต

**ะะ, ะะซ ะะะะะะะฌะะ ะะะะฏะะ!** 

ะัะต ััะธ ะฟัะธะปะพะถะตะฝะธั ะฟะพะดะบะปััะตะฝั ะบ ะพะดะฝะพะผั ัะตะฝััะฐะปัะฝะพะผั ัะตัะฒะตัั:
- **CLIENT** โ ะฟะพะดะบะปััะตะฝ ะบ SERVER
- **DRIVER** โ ะฟะพะดะบะปััะตะฝ ะบ SERVER  
- **ADMIN** โ ะฟะพะดะบะปััะตะฝ ะบ SERVER

ะกะตัะฒะตั ัะฒะปัะตััั **ะตะดะธะฝะพะน ัะพัะบะพะน ะฒัะพะดะฐ** ะดะปั ะฒัะตั ะดะฐะฝะฝัั ะธ ะฑะธะทะฝะตั-ะปะพะณะธะบะธ, ััะพ ะพะฑะตัะฟะตัะธะฒะฐะตั:
- ะฆะตะฝััะฐะปะธะทะพะฒะฐะฝะฝะพะต ัะฟัะฐะฒะปะตะฝะธะต
- ะะตะทะพะฟะฐัะฝะพััั ะดะฐะฝะฝัั
- ะกะธะฝััะพะฝะธะทะฐัะธั ะผะตะถะดั ะฟัะธะปะพะถะตะฝะธัะผะธ
- ะะฐัััะฐะฑะธััะตะผะพััั ัะธััะตะผั

